// Обновление выпадающих списков игроков
function updatePlayerSelects() {
    const player1Select = document.getElementById('player1');
    const player2Select = document.getElementById('player2');
    const editPlayerSelect = document.getElementById('edit-player');
    
    const currentPlayer1 = player1Select.value;
    const currentPlayer2 = player2Select.value;
    const currentEditPlayer = editPlayerSelect.value;
    
    player1Select.innerHTML = '<option value="">Выберите игрока 1</option>';
    player2Select.innerHTML = '<option value="">Выберите игрока 2</option>';
    
    if (isAdmin) {
        editPlayerSelect.innerHTML = '<option value="">Выберите игрока для редактирования</option>';
    } else {
        editPlayerSelect.innerHTML = '<option value="">Выберите игрока для редактирования</option>';
        document.getElementById('edit-form').style.display = 'none'; // Скрыть форму при выходе из админ-режима
    }
    
    const sortedPlayers = [...players].sort((a, b) => a.name.localeCompare(b.name));
    
    sortedPlayers.forEach(player => {
        const option1 = document.createElement('option');
        option1.value = player.id;
        option1.textContent = player.name;
        player1Select.appendChild(option1);
        
        const option2 = document.createElement('option');
        option2.value = player.id;
        option2.textContent = player.name;
        player2Select.appendChild(option2);
        
        if (isAdmin) {
            const optionEdit = document.createElement('option');
            optionEdit.value = player.id;
            optionEdit.textContent = player.name;
            editPlayerSelect.appendChild(optionEdit);
        }
    });
    
    player1Select.value = currentPlayer1;
    player2Select.value = currentPlayer2;
    
    if (isAdmin && currentEditPlayer) {
        editPlayerSelect.value = currentEditPlayer;
        showEditForm();
    }
}
